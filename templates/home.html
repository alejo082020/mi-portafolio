{% extends "base.html" %}
{% load static %}

{% block title %}{{ perfil.nombre_completo|default:"Mi Portafolio" }}{% endblock %}

{% block head %}
<style>
  .hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 4rem 0;
    margin-bottom: 3rem;
    border-radius: 10px;
  }
  
  .profile-img {
    width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 50%;
    border: 5px solid white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  .skill-badge {
    display: inline-block;
    background: #e0e7ff;
    color: #4338ca;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    margin: 0.25rem;
    font-weight: 500;
  }
  
  .project-card {
    transition: transform 0.3s, box-shadow 0.3s;
    height: 100%;
  }
  
  .project-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
  }
  
  .banner-btn {
    margin: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    transition: all 0.3s;
  }
  
  .banner-btn:hover {
    transform: scale(1.05);
  }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-4 text-center">
        {% if perfil and perfil.foto %}
          <img src="{{ perfil.foto }}" class="profile-img" alt="{{ perfil.nombre_completo }}">
        {% else %}
          <img src="{% static 'images/default-avatar.png' %}" class="profile-img" alt="Foto de perfil">
        {% endif %}
      </div>
      <div class="col-md-8">
        <h1 class="display-4 fw-bold">{{ perfil.nombre_completo|default:"Tu Nombre" }}</h1>
        <p class="lead">{{ perfil.titulo_profesional|default:"Desarrollador Web" }}</p>
        <p>{{ perfil.descripcion|default:"Agrega tu descripción profesional desde el panel de administración" }}</p>
        
        {% if perfil %}
        <div class="mt-3">
          {% if perfil.email %}
            <a href="mailto:{{ perfil.email }}" class="btn btn-light me-2">
              <i class="bi bi-envelope"></i> Email
            </a>
          {% endif %}
          {% if perfil.linkedin %}
            <a href="{{ perfil.linkedin }}" target="_blank" class="btn btn-light me-2">
              <i class="bi bi-linkedin"></i> LinkedIn
            </a>
          {% endif %}
          {% if perfil.github %}
            <a href="{{ perfil.github }}" target="_blank" class="btn btn-light">
              <i class="bi bi-github"></i> GitHub
            </a>
          {% endif %}
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Skills Section -->
<section class="mb-5">
  <h2 class="mb-4">Habilidades Técnicas</h2>
  <div class="d-flex flex-wrap">
    {% for skill in skills %}
      <span class="skill-badge">{{ skill.nombre }}</span>
    {% empty %}
      <p class="text-muted">Agrega tus habilidades desde el panel de administración</p>
    {% endfor %}
  </div>
</section>

<!-- Portafolio Section -->
<section class="mb-5">
  <h2 class="mb-4">Proyectos Destacados</h2>
  <div class="row">
    {% for proyecto in proyectos %}
      <div class="col-md-4 mb-4">
        <div class="card project-card">
          {% if proyecto.imagen %}
            <img src="{{ proyecto.imagen }}" class="card-img-top" alt="{{ proyecto.titulo }}">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title">{{ proyecto.titulo }}</h5>
            <p class="card-text">{{ proyecto.descripcion|truncatewords:20 }}</p>
            <p class="text-muted small">
              <strong>Tecnologías:</strong> {{ proyecto.tecnologias }}
            </p>
            {% if proyecto.url %}
              <a href="{{ proyecto.url }}" target="_blank" class="btn btn-primary btn-sm">Ver Proyecto</a>
            {% endif %}
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <p class="text-muted">Agrega tus proyectos desde el panel de administración</p>
      </div>
    {% endfor %}
  </div>
</section>

<!-- Banners Section con UTM -->
<section class="mb-5">
  <h2 class="mb-4">Sitios Recomendados</h2>
  <div class="text-center">
    {% for banner in banners %}
      <a href="{{ banner.get_url_completa }}" 
         target="_blank" 
         rel="noopener" 
         class="btn btn-primary banner-btn"
         onclick="gtag('event', 'banner_click', {'banner_name': '{{ banner.titulo }}'});">
        {{ banner.titulo }}
      </a>
    {% empty %}
      <p class="text-muted">Agrega banners con parámetros UTM desde el panel de administración</p>
    {% endfor %}
  </div>
</section>

<!-- Contacto CTA -->
<section class="text-center bg-light p-5 rounded">
  <h3>¿Interesado en trabajar juntos?</h3>
  <p class="lead">Contáctame y hablemos sobre tu proyecto</p>
  <a href="{% url 'contactame' %}" class="btn btn-primary btn-lg">Contáctame</a>
</section>
{% endblock %}
